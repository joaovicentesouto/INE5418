version: '3'

services:

  cont1:
    build:
      context: ./
      dockerfile: Dockerfile
    container_name: container1
    hostname: container1
    environment:
      - CONTAINERS_AMOUNT=3
      - SERVER_NAME=container1
      - HIBERNATION_TIME=1
      - SHARED_FILE=/shared_content/shared_object.dat
    volumes:
      - ./shared_content:/shared_content
    expose:
      - "62000"
    # tty: true                  # iterative

  cont2:
    build:
      context: ./
      dockerfile: Dockerfile
    container_name: container2
    hostname: container2
    environment:
      - CONTAINERS_AMOUNT=3
      - SERVER_NAME=container1
      - HIBERNATION_TIME=3
      - SHARED_FILE=/shared_content/shared_object.dat
    volumes:
      - ./shared_content:/shared_content
    # tty: true                  # iterative

  cont3:
    build:
      context: ./
      dockerfile: Dockerfile
    container_name: container3
    hostname: container3
    environment:
      - CONTAINERS_AMOUNT=3
      - SERVER_NAME=container1
      - HIBERNATION_TIME=5
      - SHARED_FILE=/shared_content/shared_object.dat
    volumes:
      - ./shared_content:/shared_content
    # tty: true                  # iterative