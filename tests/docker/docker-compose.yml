version: '3'

services:

  cont0:
    build:
      context: ./
      dockerfile: Dockerfile
    container_name: container0
    hostname: container0
    environment:
      - ID=0
      - CONTAINERS_AMOUNT=3
      - SERVER_NAME=container0
      - HIBERNATION_TIME=1
      - SHARED_FILE=/shared_content/shared_object.dat
    volumes:
      - ./shared_content:/shared_content
    expose:
      - "62000"
    # tty: true                  # iterative

  cont1:
    build:
      context: ./
      dockerfile: Dockerfile
    container_name: container1
    hostname: container1
    depends_on:
      - cont0
    environment:
      - ID=1
      - CONTAINERS_AMOUNT=3
      - SERVER_NAME=container0
      - HIBERNATION_TIME=3
      - SHARED_FILE=/shared_content/shared_object.dat
    volumes:
      - ./shared_content:/shared_content
    expose:
      - "62000"
    # tty: true                  # iterative

  cont2:
    build:
      context: ./
      dockerfile: Dockerfile
    container_name: container2
    hostname: container2
    depends_on:
      - cont0
    environment:
      - ID=2
      - CONTAINERS_AMOUNT=3
      - SERVER_NAME=container0
      - HIBERNATION_TIME=5
      - SHARED_FILE=/shared_content/shared_object.dat
    volumes:
      - ./shared_content:/shared_content
    expose:
      - "62000"
    # tty: true                  # iterative